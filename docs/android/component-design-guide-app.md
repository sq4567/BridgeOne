---
title: "BridgeOne 컴포넌트 디자인 가이드"
description: "특수/공통 컴포넌트(UI) 명세와 구현 지침: 버튼, DPad 등"
tags: ["design-guide", "components", "ui", "compose"]
version: "v0.3"
owner: "Chatterbones"
updated: "2025-10-22"
note: "본 문서에 존재하는 모든 상수값 및 설정값은 초기 값으로, 확정된 고정값이 아님"
---

# BridgeOne 컴포넌트 디자인 가이드

**핵심**:
- 본 앱은 사용자의 터치 입력을 8바이트 델타 프레임으로 변환하여 USB-Serial을 통해 ESP32-S3 동글로 전송합니다.
- 키보드 입력(버튼 컴포넌트)은 KeyDown/KeyUp 명령으로 ESP32-S3를 통해 HID Boot Keyboard 인터페이스로 PC에 전송됩니다.
- 멀티 커서, 매크로 등의 고급 기능은 0xFF 헤더와 JSON 구조의 커스텀 명령으로 처리되며, Vendor CDC Interface를 통해 PC Windows 서비스와 양방향 통신합니다.

**입력 통로 구분**:
- **마우스 입력**: 8바이트 델타 프레임 → HID Boot Mouse (터치패드, DPad 컴포넌트)
- **키보드 입력**: KeyDown/KeyUp 명령 → HID Boot Keyboard (버튼 컴포넌트)
- **고급 기능**: 커스텀 명령 → Vendor CDC Interface (매크로, 멀티 커서 등)

## UI 컴포넌트 상세 명세

**참고**:
> 이 문서는 [`design-guide-app.md`](design-guide-app.md)의 특수 컴포넌트 관련 내용을 별도로 분리한 문서입니다. 전체 디자인 가이드는 메인 가이드를 참조하세요.
> 상수/임계값 단일 출처(SSOT): 컴포넌트별 디바운스/반복/크기 등 수치 상수는 [`technical-specification-app.md` §3](technical-specification-app.md#3-usb-통신--hid--vendor-cdc)을 참조합니다.
> 전체 시스템 아키텍처는 [`technical-specification.md` §3](../technical-specification.md#3-시스템-아키텍처)를, 용어 정의는 [`technical-specification.md` §6.2 Android 플랫폼 용어집](../technical-specification.md#62-android-플랫폼-용어집)을 참조하세요.

---

## 1. 터치패드 컴포넌트

> 본 프로젝트의 최중요 컴포넌트이자 기능의 수 및 복잡도가 매우 높은 컴포넌트입니다.
> 따라서 [`component-touchpad.md`](component-touchpad.md)에 개별 문서로 작성되었습니다.

---

## 2. 버튼 컴포넌트

### 2.1 설계 의도와 사용자 가치

**핵심 목적**:
- Android 앱을 통해 PC의 키보드, 마우스, 매크로 기능을 원격으로 제어할 수 있는 직관적이고 효율적인 인터페이스 제공
- 근육장애나 거동이 불편한 사용자가 제한된 모바일 터치만으로 복잡한 PC 조작을 수행할 수 있도록 지원
- 물리적 키보드 없이도 소프트웨어 개발, 문서 작업, 게임 조작 등 다양한 PC 작업을 모바일에서 수행 가능하도록 함

**사용자 시나리오**:
- **개발자**: 코드 에디터에서 자주 사용하는 단축키(복사, 붙여넣기, 저장)를 모바일에서 빠르게 실행
- **일반 사용자**: PC에서 미디어 재생, 볼륨 조절, 창 전환 등의 기본 조작을 모바일에서 수행
- **게이머**: Minecraft 등 게임에서 인벤토리 조작, 채팅, 이동 등의 기능을 모바일 터치로 실행
- **접근성 사용자**: 물리적 키보드 사용이 어려운 사용자가 모바일 인터페이스로 PC를 완전히 제어

**디자인 원칙**:
- **단순성**: 복잡한 조작을 최소한의 탭으로 수행할 수 있도록 설계
- **직관성**: 물리적 키보드의 레이아웃과 동작을 모바일에서 직관적으로 재현
- **효율성**: 자주 사용하는 기능은 1탭으로, 복잡한 조합은 스마트한 그룹화로 접근성 극대화
- **일관성**: 모든 버튼이 동일한 시각적 언어와 상호작용 패턴을 공유

**기술적 접근성**:
- **USB HID 프로토콜**: 표준 키보드/마우스 신호를 모바일에서 생성하여 PC로 전송
- **양방향 통신**: 매크로 실행 상태를 실시간으로 확인하고 피드백 제공
- **상태 관리**: 연결 상태, 버튼 활성화 상태를 명확히 구분하여 혼란 방지

### 2.2 버튼 구조 및 색상 시스템

#### 2.2.1 버튼 구조

- 높이: 48dp
- 둥근 모서리: 8dp
- 배경: 상태별 색상
- 텍스트: 16sp, Medium

#### 2.2.2 버튼 색상 시스템

`#2196F3`: Enabled 상태 버튼 배경색
`#121212`: 버튼 텍스트
`#C2C2C2`: Disabled 상태 버튼 배경
`#1976D2`: 터치 및 Sticky Hold Fill 애니메이션 및 Hold 상태 버튼 배경

### 2.3 버튼 타입과 기능 매핑

**개요**:
- 각 버튼은 탭 1회로 즉시 실행되는 것을 기본으로 하며, 필요 시 길게 누르기/토글 동작을 지원합니다.
- 색상은 [`design-guide-app.md` §2](design-guide-app.md#2-색상-시스템)(색상 시스템)의 토큰을 따릅니다.

#### 2.3.1 키보드 버튼(KeyboardKeyButton)

- **목적**: Ctrl, Alt, Shift, Enter, Space, Tab, Backspace 등 단일 키에 대한 KeyDown/KeyUp 전송
- **기능**: BIOS/BitLocker 단계에서도 호환되며, Boot Protocol에서 기본 키만 지원(A-Z, 0-9, 특수키 등)
- **유저 플로우**:
  - 탭: 키 누름과 해제를 즉시 전송 (Sticky Hold=Off)
  - 롱프레스(Sticky Hold, 선택): 임계시간 초과 시 키 누름을 유지하며, 다음 탭에서 키 해제 후 상태 해제
- **시각/피드백**:
  - 색상: 기본 `#2196F3`, Disabled `#C2C2C2`, 터치/StickyHold `#1976D2`
  - 햅틱: Light 1회([`design-guide-app.md` §5.4.2](design-guide-app.md#542-피드백-카테고리와-사용-원칙))
  - 롱프레스 Fill 애니메이션: 버튼 배경이 좌측에서 우측으로 채워지는 시각적 피드백

**구현 요구사항**: [`technical-specification-app.md` §2.3.2.1](technical-specification-app.md#2321-keyboardkeybutton-컴포넌트-설계-요구사항)(KeyboardKeyButton 컴포넌트 설계 요구사항) 참조

#### 2.3.2 단축키 버튼(ShortcutButton)

- 목적: Ctrl+C, Ctrl+V, Alt+Tab 등 복합 조합을 원터치로 실행
- 유저 플로우:
  - 탭: 정의된 키 조합을 순차적으로 전송 (예: Ctrl+C = Ctrl 누름 → C 누름 → C 해제 → Ctrl 해제)
- 시각/피드백:
  - 색상: 기본 `#2196F3`, Disabled `#C2C2C2`
  - 햅틱: Light 1회
- 접근성 요구사항:
  - 비동기 시퀀스 실행을 지원해야 함
  - 버튼 역할과 상태를 포함한 설명을 제공해야 함

**구현 요구사항**: [`technical-specification-app.md` §2.3.2.2](technical-specification-app.md#2322-shortcutbutton-컴포넌트-설계-요구사항)(ShortcutButton 컴포넌트 설계 요구사항) 참조

#### 2.3.3 매크로 버튼(MacroButton)

- 목적: Android 앱이 동글을 통해 PC(Windows) 서버의 특정 매크로 실행을 트리거
- 유저 플로우 요약:
  - 탭: 매크로 실행 요청 전송 → 버튼 비활성화(중복 입력 방지)
  - 응답: 작업 완료 또는 실패 신호 수신
  - 강제 해제: 동일 버튼 재탭 시 취소 요청 및 UI 강제 활성화
- 시각/피드백:
  - 색상: 기본 `#2196F3`, Disabled `#C2C2C2`
  - 햅틱: Light 1회(시작/종료 시 토스트와 조합)
  - 토스트: 매크로 성공 시 녹색, 실패/중단 시 빨간색 토스트 표시
- 접근성 요구사항:
  - 비활성 상태 관리와 자동 복구 처리를 지원해야 함
  - 버튼 역할과 상태를 포함한 설명을 제공해야 함

**구현 요구사항**: [`technical-specification-app.md` §2.3.2.3](technical-specification-app.md#2323-macrobutton-컴포넌트-설계-요구사항)(MacroButton 컴포넌트 설계 요구사항) 참조

#### 2.3.4 컨테이너 버튼(ContainerButton)

- 목적: 여러 하위 버튼을 그룹화하여 팝업 오버레이 형태로 표시하는 컨테이너 버튼
- 유저 플로우:
  - **탭 (일반 모드)**: 팝업 오버레이 표시
    - 하위 버튼 탭: 해당 버튼의 기능 실행 후 팝업 자동 닫힘
    - 팝업 외부 탭/Back 키: 팝업 닫힘
  - **길게 누르기 (지속 모드)**: 팝업 오버레이 표시, 지속 모드로 전환
    - 하위 버튼 탭: 해당 버튼의 기능 실행 후에도 팝업 유지
    - 팝업 닫는 방법: 팝업 외부 영역 터치/Back 키만으로 닫힘
- 시각/피드백:
  - 색상: 기본 `#2196F3`, Disabled `#C2C2C2`, 팝업 중 `#1976D2`
  - 햅틱: Light 1회 (팝업 열기/닫기, 하위 버튼 선택)
  - 팝업: 어두운 스크림 배경과 둥근 컨테이너 박스
  - 롱프레스 Fill 애니메이션: 버튼 배경이 좌측에서 우측으로 채워지는 시각적 피드백
- 접근성 요구사항:
  - 터치 이벤트와 팝업 오버레이 애니메이션을 지원해야 함
  - 탭과 길게 누르기 이벤트를 모두 지원해야 함
  - 버튼 역할과 상태를 포함한 설명을 제공해야 함 (팝업 모드 구분 포함)
  - 키보드 네비게이션을 지원해야 함(하위 버튼 간 이동)

**구현 요구사항**: [`technical-specification-app.md` §2.3.2.4](technical-specification-app.md#2324-containerbutton-컴포넌트-설계-요구사항)(ContainerButton 컴포넌트 설계 요구사항) 참조

### 2.4 설계 요구사항

목표: 버튼 컴포넌트의 디자인, 상태, 상호작용 플로우에 대한 설계 요구사항을 정의합니다.

핵심 설계 요소:
- 크기/모양: 높이 48dp, 최소 터치 48×48dp, 둥근 모서리 12dp
- 색상: 기본 색상, 흰색 텍스트, 회색 Disabled 상태(alpha 0.6), 어두운 색상(터치/StickyHold)
- 터치 피드백: 리플 효과를 사용하지 않고 200ms 스케일 변화(0.98 → 1.0)로 표현

상태별 동작 정의:
- 키보드 버튼(KeyboardKeyButton):
  - 탭 동작: 키 누름과 해제를 즉시 전송
  - 롱프레스 Sticky Hold: 500ms 임계값 초과 시 Sticky 상태로 키 누름을 유지하며, 다음 탭에서 키 해제 후 상태 해제
- 단축키 버튼(ShortcutButton):
  - 키 시퀀스: 정의된 순서에 따라 키 누름/해제를 순차 전송(예: Ctrl+C = Ctrl누름 → C누름 → C해제 → Ctrl해제)
  - 중복 입력 방지: 150ms 내 재탭 무시
- 매크로 버튼(MacroButton):
  - 동작 흐름: 탭 시 매크로 시작 요청 → 버튼 비활성화 → 작업 완료 시 버튼 활성화 복구
  - 진행 상태 표시: 버튼 내부 로더를 사용하지 않고, 상단 상태 알림 토스트로만 표시([`design-guide-app.md` §5.2](design-guide-app.md#52-상태-알림-토스트--status-notification-toast))
  - 성공 상태 표시: 매크로 완료 시 #4CAF50 (녹색) 토스트로 성공 알림
  - 실패/중단 상태 표시: 매크로 실패/중단 시 #F44336 (빨간색) 토스트로 오류 알림
  - 강제 해제: 동일 버튼 재탭 시 매크로 취소 요청과 전체 터치 강제 활성화 요청을 전송하며, 토스트로 1000ms간 알림
- 컨테이너 버튼(ContainerButton):
  - **일반 모드 (탭)**: 탭 시 팝업 오버레이를 표시
    - 하위 선택: 하위 버튼 선택 시 해당 기능 실행 후 팝업 자동 닫힘
    - 팝업 닫기: 외부 영역 탭, Back 키, ESC 키로 닫기 가능
  - **지속 모드 (길게 누르기)**: 임계시간 초과 시 팝업 오버레이를 지속 모드로 표시
    - 하위 선택: 하위 버튼 선택 시 해당 기능 실행 후에도 팝업 유지
    - 팝업 닫기: 외부 영역 터치, Back 키, ESC 키로만 닫기 가능
  - 중복 입력 방지: 150ms 내 재탭 무시

접근성 요구사항:
- 버튼 역할과 현재 상태를 포함한 설명을 제공해야 함(Disabled 상태 포함)
- 시각적 의존성 감소: 색상과 아이콘을 함께 사용하며, 상태 알림은 LiveRegion(Polite)으로 제공

### 2.5 Disabled 상태 정의

**개요**:
- 각 버튼 컴포넌트의 입력 불가 상태(Enabled/Disabled)를 정의합니다.

**공통 규칙 (모든 버튼 공통)**:
- **시각**: 버튼 컴포넌트가 자체적으로 Disabled 상태 스타일을 적용합니다. 일반적으로 회색 톤(alpha 0.6)으로 표시됩니다.
- **동작**: 모든 입력을 차단하며, 사용자의 터치 이벤트를 처리하지 않습니다.
- **접근성**: 상태 변화 시 사용자에게 알림을 제공해야 합니다.

**버튼 유형별 Disabled 처리**:
- **KeyboardKeyButton**: 외부 신호에 따라 비활성화되며, 모든 입력(탭, 롱프레스, Sticky Hold)을 차단합니다.
- **ShortcutButton**: 외부 신호에 따라 비활성화되며, 모든 입력을 차단합니다.
- **MacroButton**: 작업 실행 중 자동으로 비활성화되며, 강제 해제 기능이 있습니다.
- **ContainerButton**: 외부 신호에 따라 비활성화되며, 팝업이 열려있을 때 비활성화되면 팝업을 즉시 닫습니다.

**Disabled 상태 색상**:
- 기본 Disabled 색상: `#C2C2C2` (alpha 0.6)
- 팝업 관련 색상: 어두운 스크림 배경과 둥근 컨테이너 박스

**참조**: [`design-guide-app.md` §2](design-guide-app.md#2-색상-시스템)(색상 시스템), [`design-guide-app.md` §5.2](design-guide-app.md#52-상태-알림-토스트--status-notification-toast)(상태 알림 토스트)

## 3. DPad

**강제 재연결 처리**: 기본 HID 키보드 기능(방향키)이므로 재연결 중에도 정상 동작, Disabled 상태로 전환하지 않음

**구현 요구사항**: [`technical-specification-app.md` §2.3.2.5](technical-specification-app.md#2325-dpad-컴포넌트-설계-요구사항)(DPad 컴포넌트 설계 요구사항) 참조

### 3.1 입력 처리 유저 플로우

- **탭**:
  - 방향 영역 탭: 해당 방향 Down → Up 즉시 전송
  - 중앙 영역 탭: 입력 없음(무시)
- **더블탭 (Sticky Hold)**:
  - 동일 방향을 300ms 이내 연속 탭: 해당 방향 Sticky Hold 진입 (키다운 상태 유지)
  - Sticky Hold 상태에서 동일 방향 탭: Sticky Hold 해제 (키업 전송)
  - 더블탭 타이밍: 300ms 이내, 초과 시 일반 탭 처리 (`STICKY_HOLD_DOUBLE_TAP_MS = 300`)
- **드래그 전환**:
  - 동일 포인터 유지 시 섹터 간 전환 허용(§1.2.1 DPad 예외)
  - 전환 시 이전 방향 Up → 새 방향 Down(레이턴시 최소화, 최대 1프레임 내)
  - Sticky Hold 상태에서도 섹터 전환 허용 (홀드 방향 + 새 방향 동시 입력)
- **대각선 입력**:
  - 대각선 섹터에서는 두 방향을 동시에 Down/Up 처리(예: UpLeft = Up+Left)
  - Sticky Hold와 조합 시 홀드 방향 + 대각선 방향 동시 처리 가능
- **디바운스**:
  - 동일 방향 재탭 50ms 이내 무시(`REINPUT_DEBOUNCE_MS = 50`)
  - Sticky Hold 상태에서의 재탭은 디바운스 적용하지 않음 (해제용)

### 3.2 구조 및 색상 시스템

#### 3.2.1 구조

- **컨테이너 크기(권장)**: 120dp × 120dp 정사각형
- **모양**: 원형 또는 둥근 사각형(`RoundedCornerShape(12.dp)` 이상)
- **배경**: VectorDrawable(`dpad.xml`) 베이스 레이어 사용(뷰박스 12×12, 방향 팔 4개 폴리곤)
- **레이어**: 베이스(배경) · 방향 하이라이트(선택 시)
- **최소 터치 영역**: 48dp × 48dp

영역 분할(센서틱 히트맵):
- **중심 원형**: 반지름 = 컨테이너의 0.25–0.30
- 방향(상/하/좌/우) 4개 + 대각선(좌상/우상/좌하/우하) 4개 = 총 8분할
- **판정 방식**: 중심 기준 벡터 각도로 섹터 매핑(45° 단위, 경계 허용오차 10°)
  - 중앙 영역 입력: 입력 없음(무시)

#### 3.2.2 색상 시스템

`#C2C2C2`: 기본 테두리; 비활성(Disabled) 오버레이(alpha 0.6)
`#2196F3`: 선택(Selected) 하이라이트; 방향 영역 오버레이(alpha 0.3)
`#1976D2`: Sticky Hold 하이라이트; 홀드 방향 영역 오버레이(alpha 0.5)
`#FFFFFF`: 텍스트/아이콘(배경 대비 4.5:1 이상일 때)

**Sticky Hold 시각적 구분**:
- 일반 선택: `#2196F3` (alpha 0.3) - 연한 파란색 오버레이
- Sticky Hold: `#1976D2` (alpha 0.5) - 더 진한 파란색 오버레이 + 2dp 두께 테두리

#### 3.2.3 이미지 소스 매핑(VectorDrawable `dpad.xml`)

- 뷰박스: 12 × 12. 폴리곤 4개가 각 방향 팔을 구성(상/좌/우/하).
- 폴리곤 인덱스 → 방향 매핑(위에서부터 선언 순서 기준):
  - 0: Up, 1: Left, 2: Right, 3: Down
- 폴리곤 정점(정규 좌표, 원본 단위 그대로 사용 — 렌더 시 컨테이너 크기에 비례 스케일):
  - Up: [(8.25,0.28),(8.24,2.98),(5.99,5.20),(3.75,2.96),(3.75,0.28)]
  - Left: [(0.28,8.25),(0.28,3.75),(2.98,3.76),(5.20,6.01),(2.96,8.25)]
  - Right: [(11.72,3.75),(11.72,8.25),(9.02,8.24),(6.80,5.99),(9.04,3.75)]
  - Down: [(8.25,11.72),(3.75,11.72),(3.75,9.04),(5.99,6.80),(8.24,9.02)]
- 대각선 하이라이트: 선택된 두 방향 팔의 폴리곤을 동시에 오버레이(예: UpLeft = Up + Left).
- 리소스 네이밍/적용 권장:
  - Android 리소스는 소문자 스네이크케이스 권장. 런타임 적용은 `dpad` 리소스 ID 기준으로 관리.
  - VectorDrawable(`ic_dpad.xml`) 사용 권장. 빌드 시 `DPad.svg` → `ic_dpad.xml` 변환 적용됨.


### 3.3 시각/피드백

- Selected 방향: VectorDrawable(`dpad.xml`) 내 해당 방향 팔(폴리곤)을 선택 색으로 오버레이 + 컨테이너 테두리 `#2196F3`
- Sticky Hold 방향: VectorDrawable(`dpad.xml`) 내 해당 방향 팔(폴리곤)을 홀드 색상(`#1976D2`)으로 오버레이 + 2dp 두께 진한 테두리
- 혼합 상태: 일반 선택과 Sticky Hold가 공존할 때 각각 다른 색상으로 동시 표시
- Unselected: 원본 상태 유지
- 애니메이션:
  - Sticky Hold 진입: 200ms scale 애니메이션 (1.0 → 1.15 → 1.1) + 색상 전환
  - Sticky Hold 해제: 150ms scale 애니메이션 (1.1 → 0.95 → 1.0) + 색상 전환
- 햅틱:
  - 탭/전환: Light 1회
  - Sticky Hold 진입: Medium 1회 (더 명확한 구분을 위해)
  - Sticky Hold 해제: Light 1회 (진입과 구분)

**시각적 구분 전략**:
- 일반 선택: 연한 파란색 오버레이로 현재 입력 표시
- Sticky Hold: 진한 파란색 오버레이 + 테두리로 지속 입력 표시
- 사용자는 색상 차이로 일반 탭과 홀드 상태를 즉시 구분 가능

### 3.4 Sticky Hold 기능 (한 손가락 조작 최적화)

**목적**: 마인크래프트 등에서 이동과 시점 전환을 동시에 가능하게 하여 한 손가락 조작성을 극대화.

**사용법**:
- **홀드 진입**: 특정 방향을 300ms 이내에 두 번 탭
- **홀드 해제**: 홀드 중인 방향을 한 번 더 탭하거나 다른 방향을 터치

**HID 매핑**:
- 홀드 진입: 해당 방향 키 Down 신호 전송 후 키다운 상태 유지
- 홀드 유지: 키보드 상태 유지 (Up 신호 전송하지 않음)
- 홀드 해제: 해당 방향 키 Up 신호 전송

**상태 관리**:
- `currentStickyDirection`: 현재 홀드 중인 단일 방향 저장
- `lastTapTime/lastTapDirection`: 더블탭 감지용 임시 상태
- 비정상 종료 시 홀드 상태 복구하여 세션 일관성 유지

**사용성 가이드라인**:
- **명확한 시각적 구분**: 홀드 상태는 더 진한 색상과 테두리로 일반 선택과 차별화
- **즉각적인 피드백**: 홀드 진입/해제 시 햅틱과 애니메이션으로 상태 전환 명확히 알림
- **실수 방지**: 300ms 더블탭 타이밍으로 일반 탭과 명확히 구분
- **단순한 조작**: 한 번에 한 방향만 홀드하여 조작 복잡도 감소

**제약사항**:
- Disabled 상태 진입 시 모든 홀드 강제 해제
- 방향키와의 충돌 방지 (WASD 키 매핑 우선)

**접근성**:
- 홀드 상태 변경 시 토스트 메시지로 알림
- `contentDescription`에 "(홀드)" 상태 정보 포함
- 고대비 모드에서 홀드 상태 더 명확한 구분 제공
