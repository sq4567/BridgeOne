---
title: "WaitingForConnection 상태 - UI/UX 스타일프레임"
description: "연결 대기 화면의 순수 UI/UX 디자인 명세 및 사용자 경험 가이드"
tags: ["styleframe", "ui", "ux", "connection", "design", "accessibility"]
version: "v1.0" 
owner: "Chatterbones"
updated: "2025-09-18"
references: ["design-guide-app.md §9.1.3"]
note: "본 문서는 순수 UI/UX 스타일프레임을 정의합니다. 기술적 구현은 design-guide-app.md §9.1.3을 참조하세요."
---

## 1. 개요

### 1.1 문서 오버뷰

**문서 목적:**
- 본 문서는 **연결 대기 화면**의 **순수 UI/UX 스타일프레임**을 정의합니다.
- 기술적 구현과 분리된 디자인 명세로, 시각적 요소, 사용자 경험, 접근성 규칙에 중점을 둡니다.
**문서 범위:**
- **포함**: 레이아웃, 색상, 타이포그래피, 애니메이션, 상호작용 패턴
- **제외**: 코드 구현, 시스템 아키텍처, 상태 관리 로직
**대상 독자:**
- **주 대상**: UX 디자이너, UI 개발자
- **부 대상**: 프로덕트 매니저, QA 엔지니어
**관련 문서:**
- **기술 구현**: `design-guide-app.md` §9.1.3 연결 대기 화면
**활용 방법:**
1. **디자인 검토**: 스타일프레임 규격 준수 여부 확인
2. **개발 가이드**: UI 구현 시 디자인 명세 참조
3. **QA 기준**: 사용자 경험 및 접근성 테스트 기준

### 1.2 WaitingForConnection 상태 정의

**AppState.WaitingForConnection**은 USB 동글과 Windows 서버 연결을 대기하는 화면 상태입니다.

**주요 역할:**
- USB 동글 연결 안내 및 진행 상태 표시
- 서버 연결 시도 진행 상황 안내
- 사용자 친화적인 대기 경험 제공
- 연결 문제 발생 시 명확한 안내 메시지 표시

**강제 재연결과의 구분:**
- **일반 연결 대기**: USB 분리나 예상치 못한 오류로 인한 연결 대기 (이 화면 사용)
- **강제 재연결**: 서버가 의도적으로 요청하는 재연결 (Essential 페이지에서 대기, 이 화면 사용하지 않음)

> **기술적 구현 세부사항**은 `design-guide-app.md` §9.1.3 연결 대기 화면을 참조하세요.
> - 상태 모델 정의 (UsbConnectionState, ServerConnectionState)
> - 시스템 아키텍처 및 연결 플로우
> - 자동 탐지 시스템 및 Cancel and Restart 패턴
> - 오류 처리 및 복구 정책

## 2. 레이아웃 및 UI 스타일프레임

### 2.1 기본 화면 구조

**레이아웃 원칙:**
- 기본 구조: 단일 페이지 전체 화면 레이아웃
- 배경: 앱 기본 배경색 (#121212)
- 페이지 인디케이터: 숨김 처리
- 네비게이션: 비활성화 (스와이프 제스처 무시)

### 2.2 중앙 연결 안내 영역

**위치 및 크기:**
- 화면 중앙 정렬 (수직, 수평 중앙)
- 전체 영역: 화면 폭의 80%, 높이 자동 조절
- 패딩: 상하좌우 32dp

**구성 요소:**
- **연결 아이콘:**
  - 크기: 128dp × 128dp (기본), 반응형 96dp~160dp
  - 위치: 최상단 중앙 정렬
  - 아이콘: USB 연결 아이콘 (`ic_usb.xml`)
  - 색상: #FF9800 (주황색, 로딩 상태)
  - 애니메이션: 360도 회전 (2초 주기, 무한 반복)
- **주 메시지 (동적 변경):**
  - **1단계**: "USB 동글을 연결해주세요"
  - **2단계**: "서버를 찾고 있습니다" (USB 연결 후)
  - **권한 요청**: "USB 권한을 요청했습니다"
  - **오류 상태**: "연결에 실패했습니다"
  - 폰트: Pretendard-Bold, 24sp (H1)
  - 색상: #FFFFFF
  - 위치: 아이콘 하단 24dp 간격
- **부 메시지 (동적 변경):**
  - **1단계**: "OTG 케이블과 동글을 확인해주세요"
  - **2단계**: "잠시만 기다려주세요" (USB 연결 후)
  - **권한 요청**: "권한을 허용해주세요"
  - **오류 상태**: 구체적인 오류 메시지 표시
  - 폰트: Pretendard-Regular, 16sp (Body)
  - 색상: #C2C2C2
  - 위치: 주 메시지 하단 16dp 간격


### 2.3 ASCII 레이아웃 (전체 화면)

```text
┌──────────────────────────────────────────────────────────────────────────────┐
│                                                                              │
│                              [상태 토스트]                                  │
│           "USB 연결됨" → "서버를 찾는 중..." → "모든 기능 활성화"            │
│                                                                              │
│                                                                              │
│                               ⟲ USB                                          │
│                            [128×128dp]                                       │
│                            회전 애니메이션                                   │
│                         (진행 상태에 따라 속도 조정)                         │
│                                                                              │
│                      USB 동글을 연결해주세요                                │
│                    ↓ (단계별 동적 메시지 변경)                               │
│           서버를 찾고 있습니다 / USB 권한을 요청했습니다                     │
│                           [H1, 24sp, Bold]                                   │
│                                                                              │
│                 OTG 케이블과 동글을 확인해주세요                             │
│                    ↓ (단계별 동적 메시지 변경)                               │
│           잠시만 기다려주세요 / 권한을 허용해주세요                          │
│                         [Body, 16sp, Regular]                                │
│                                                                              │
│                                                                              │
└──────────────────────────────────────────────────────────────────────────────┘
  «WaitingForConnection: 독립 상태 관리 + 단계별 메시지 + USB Serial 패턴»
```

## 3. 상호작용 및 사용자 경험

### 3.1 뒤로가기 처리

**사용자 경험 설계:**
- **동작**: 상태 알림 토스트 표시
- **첫 번째 터치**: "앱을 종료하시겠습니까?" 토스트 (파란색, 3초)
- **3초 내 두 번째 터치**: 앱 완전 종료
- **목적**: 실수로 인한 앱 종료 방지

## 4. 애니메이션 및 피드백

### 4.1 회전 애니메이션 (스타일프레임 정확한 규격)

**USB 연결 아이콘:**
- **대상**: USB 연결 아이콘 (`ic_usb.xml`)
- **방식**: Compose `infiniteRepeatable` 사용 (Android 권장)
- **속도**: 2초/360도 (30rpm) - 스타일프레임 정확한 규격
- **방향**: 시계방향
- **지속**: 화면 표시 중 무한 반복
- **조건**: `isProcessing = true`일 때만 회전

**구현 방식:**
- **Compose 애니메이션**: 무한 반복 애니메이션 활용 (Android 권장 방식)
- **회전 각도**: 0도에서 360도까지 선형 변화
- **타이밍**: tween 애니메이션으로 2000ms 정확한 주기
- **이징**: LinearEasing으로 일정한 속도 유지
- **조건부 적용**: isProcessing 상태에 따른 회전 on/off
- **성능 최적화**: 애니메이션 중단 시 즉시 0도로 복귀


### 4.2 상태 전환 애니메이션 (스타일프레임 규격)

**화면 라이프사이클:**
- **화면 진입**: Fade In (300ms) + Slide Up (20dp)
- **화면 해제**: Fade Out (200ms)
- **메시지 변경**: CrossFade (200ms) 텍스트 전환
- **토스트**: 기존 토스트 애니메이션 규칙 준수

**구현 방식:**
- **메시지 전환**: CrossFade 컴포저블로 부드러운 텍스트 변경
- **전환 시간**: 200ms 빠른 전환으로 즉각적인 피드백
- **화면 전환**: Fade In/Out과 Slide Up 조합으로 자연스러운 진입/해제
- **토스트 애니메이션**: 기존 Material Design 토스트 규칙 준수

## 5. 접근성 및 반응형 규칙

### 5.1 스크린 리더 지원

**콘텐츠 설명 (동적):**
- **연결 아이콘**: `contentDescription` 단계별 동적 변경
  - USB 단계: "USB 연결 진행 중"  
  - 서버 단계: "서버 연결 진행 중"
  - 실패 상태: "연결 실패, 자동 재시도 중"
- **상태 알림**: `LiveRegion`으로 연결 단계 변화 실시간 알림

### 5.2 시각적 접근성 (WCAG 준수)

**대비율 및 가독성:**
- **배경 대비**: 최소 4.5:1 비율 유지 (WCAG AA 기준)
- **주 메시지**: #FFFFFF vs #121212 = 21:1 (우수 등급)
- **부 메시지**: #C2C2C2 vs #121212 = 7.7:1 (우수 등급)  
- **텍스트 크기**: 동적 텍스트 크기 지원 (접근성 설정 반영)
- **색상 독립성**: 색상 외에도 아이콘과 텍스트로 상태 전달

### 5.3 모터 접근성 (터치 편의성)

**터치 영역 및 조작성:**
- **단일 터치**: 모든 기능을 한 번의 터치로 수행 가능
- **제스처**: 복잡한 제스처 불필요 (단순 탭만 사용)
- **자동 처리**: 연결 실패 시 자동 재시도 (사용자 개입 불필요)

### 5.4 반응형 규칙 (다양한 화면 크기)

**화면 크기별 대응:**
- **폭 < 360dp**: 아이콘 크기 96dp로 축소, 텍스트 크기 유지
- **폭 ≥ 600dp (Landscape/Tablet)**: 아이콘 160dp로 확대, 레이아웃 가로 배치 고려
- **높이 제약**: 아이콘과 텍스트 간격 축소 (24dp → 16dp)

**동적 크기 조절:**
- **아이콘**: 화면 크기에 따라 96dp~160dp 범위 내 자동 조절
- **텍스트**: 접근성 설정에 따른 동적 텍스트 크기 지원

